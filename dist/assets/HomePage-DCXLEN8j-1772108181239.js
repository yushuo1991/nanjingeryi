import{R as T,r as a,j as e}from"./index-CiIT1ORb-1772108181239.js";import{P as v,Z as N,e as q,f as z,c as s}from"./RehabCareLink-RZu4VCzj-1772108181239.js";import{C as O}from"./check-CCffkSIt-1772108181239.js";import{T as M}from"./trash-2-DOA6vqAV-1772108181239.js";import{P as A}from"./pen-line-DjHnYM90-1772108181239.js";const c=T.memo(({userRole:d,patients:r,departments:o,getDepartmentPatients:w,navigateTo:x,setShowAIModal:m,initBatchGenerate:y,isEditingDepartments:l,setIsEditingDepartments:h,setDepartments:u,showToast:f,setShowAddDepartment:b})=>{const j=a.useMemo(()=>r.filter(t=>t.status==="active"),[r]);a.useMemo(()=>r.filter(t=>t.status==="active"&&!t.todayTreated),[r]),a.useMemo(()=>r.filter(t=>t.todayTreated),[r]);const g=a.useMemo(()=>j.slice(-3).reverse(),[j]),k=a.useCallback(()=>{m(!0)},[m]),R=a.useCallback(()=>{h(!l)},[l,h]),C=a.useCallback(()=>{b(!0)},[b]),P=a.useCallback((t,i)=>{confirm(`ç¡®å®šè¦åˆ é™¤"${i}"å—ï¼Ÿ`)&&(u(o.filter(n=>n.id!==t)),f("ç§‘å®¤å·²åˆ é™¤"))},[o,u,f]);return e.jsx("div",{className:"min-h-screen flex justify-center pt-6 pb-6 px-4",children:e.jsxs("div",{className:"main-glass-container w-full max-w-md relative overflow-hidden flex flex-col p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-extrabold text-slate-800",children:"å—äº¬å¸‚å„¿ç«¥åŒ»é™¢åº·å¤ç§‘"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 border-2 border-white shadow-sm flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ‘¨â€âš•ï¸"})})]}),d==="therapist"&&e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsxs(v,{onClick:k,variant:"cyan",className:"flex-1 h-12 rounded-xl",children:[e.jsx(N,{size:18,fill:"white"}),"AIæ™ºèƒ½æ”¶æ²»"]}),e.jsxs(v,{onClick:y,className:"flex-1 h-12 rounded-xl",children:[e.jsx(N,{size:18}),"æ‰¹é‡ç”Ÿæˆæ—¥æŠ¥"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto hide-scrollbar",children:[d==="therapist"&&g.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4 pl-1",children:"æœ€è¿‘å»ºæ¡£"}),e.jsx("div",{className:"space-y-3",children:g.map(t=>e.jsxs("button",{onClick:()=>x("patientDetail",t),className:"w-full bg-white/60 backdrop-blur-xl rounded-2xl p-4 flex items-center gap-3 text-left border border-white/50 shadow-sm hover:bg-white/80 transition-all active:scale-[0.98]",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center text-base font-bold text-blue-600 shadow-sm flex-shrink-0 border-2 border-white",children:t.name.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"font-bold text-slate-800 text-sm mb-0.5",children:[t.name,", ",t.age]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed truncate",children:t.diagnosis})]}),e.jsx("span",{className:`text-white text-[10px] px-2.5 py-1 rounded-full font-bold shadow-sm ${t.todayTreated?"bg-gradient-to-r from-teal-400 to-emerald-400":"bg-gradient-to-r from-orange-400 to-rose-400"}`,children:t.todayTreated?"å·²æ²»":"å¾…æ²»"})]},t.id))})]}),e.jsxs("div",{className:"mb-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pl-1",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"ç§‘å®¤æ‚£å„¿åˆ†å¸ƒ"}),d==="therapist"&&e.jsx("button",{onClick:R,className:"text-xs px-3 py-1.5 rounded-lg bg-white/60 border border-slate-200 text-slate-600 hover:bg-white/80 transition-all flex items-center gap-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx(O,{size:14}),"å®Œæˆ"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:14}),"ç¼–è¾‘"]})})]}),e.jsxs("div",{className:"space-y-3",children:[o.map(t=>{const i=w(t.id),n=i.filter(p=>p.status==="active"&&!p.todayTreated).length;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>!l&&x("patients",t),disabled:l,className:`w-full bg-white/60 backdrop-blur-xl rounded-2xl p-4 flex items-center gap-3 text-left border border-white/50 shadow-sm transition-all ${l?"opacity-60":"hover:bg-white/80 active:scale-[0.98]"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center shadow-sm border border-slate-100 overflow-hidden",children:t.icon.startsWith("/images/")?e.jsx("img",{src:t.icon,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xl",children:t.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:t.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-600 text-[10px] px-2 py-0.5 rounded-full font-bold",children:[i.length," ä½æ‚£å„¿"]}),n>0&&e.jsxs("span",{className:"bg-rose-100 text-rose-500 text-[10px] px-2 py-0.5 rounded-full font-bold",children:[n," å¾…æ²»"]})]})]}),!l&&e.jsx(q,{size:18,className:"text-slate-300"})]}),l&&e.jsx("button",{onClick:()=>P(t.id,t.name),className:"absolute top-2 right-2 w-8 h-8 rounded-lg bg-red-500 text-white flex items-center justify-center hover:bg-red-600 transition-all shadow-sm",children:e.jsx(M,{size:16})})]},t.id)}),l&&e.jsxs("button",{onClick:C,className:"w-full bg-white/60 backdrop-blur-xl rounded-2xl p-4 flex items-center justify-center gap-2 border-2 border-dashed border-slate-300 text-slate-600 hover:bg-white/80 hover:border-slate-400 transition-all",children:[e.jsx(z,{size:20}),e.jsx("span",{className:"font-bold text-sm",children:"æ·»åŠ ç§‘å®¤"})]})]})]})]})]})})});c.displayName="HomePage";c.propTypes={userRole:s.oneOf(["therapist","doctor"]).isRequired,patients:s.arrayOf(s.shape({id:s.oneOfType([s.string,s.number]),name:s.string,avatar:s.string,bedNo:s.string,diagnosis:s.string,status:s.string,department:s.string,todayTreated:s.bool})).isRequired,departments:s.arrayOf(s.shape({id:s.oneOfType([s.string,s.number]),name:s.string,icon:s.string})).isRequired,getDepartmentPatients:s.func.isRequired,navigateTo:s.func.isRequired,setShowAIModal:s.func.isRequired,initBatchGenerate:s.func.isRequired,isEditingDepartments:s.bool.isRequired,setIsEditingDepartments:s.func.isRequired,setDepartments:s.func.isRequired,showToast:s.func.isRequired,setShowAddDepartment:s.func.isRequired};c.defaultProps={patients:[],departments:[]};export{c as default};
