name: 检查服务器文件结构

on:
  workflow_dispatch:

jobs:
  check-files:
    runs-on: ubuntu-latest

    steps:
    - name: 检查服务器文件
      uses: appleboy/ssh-action@v1.0.3
      with:
        host: ${{ secrets.SERVER_HOST }}
        username: ${{ secrets.SERVER_USER }}
        password: ${{ secrets.SERVER_PASSWORD }}
        port: ${{ secrets.SERVER_PORT || 22 }}
        script: |
          cd /var/www/rehab-care-link/server

          echo "========== 检查目录结构 =========="
          ls -la

          echo ""
          echo "========== 检查 middleware 目录 =========="
          if [ -d middleware ]; then
            echo "✅ middleware 目录存在"
            ls -la middleware/
          else
            echo "❌ middleware 目录不存在"
          fi

          echo ""
          echo "========== 检查 routes 目录 =========="
          if [ -d routes ]; then
            echo "✅ routes 目录存在"
            ls -la routes/
          else
            echo "❌ routes 目录不存在"
          fi

          echo ""
          echo "完成！"
