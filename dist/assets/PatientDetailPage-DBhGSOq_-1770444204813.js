var oe=Object.defineProperty,ce=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var V=(d,o,x)=>o in d?oe(d,o,{enumerable:!0,configurable:!0,writable:!0,value:x}):d[o]=x,n=(d,o)=>{for(var x in o||(o={}))ie.call(o,x)&&V(d,x,o[x]);if(U)for(var x of U(o))me.call(o,x)&&V(d,x,o[x]);return d},m=(d,o)=>ce(d,xe(o));import{c as f,R as de,r as u,j as e}from"./index-tLO3RpaO-1770444204813.js";import{g as be,p as pe,X as he,d as W,a as ue,F as Y,C as j,b as ge,c as s}from"./RehabCareLink-D-hlOxJv-1770444204813.js";import{C as je}from"./chevron-left-CDoKucJO-1770444204813.js";import{C as Ne}from"./check-BddYGKRJ-1770444204813.js";import{T as Z}from"./trash-2-CE-cjzd6-1770444204813.js";import{P as fe}from"./printer-DSi9bQPV-1770444204813.js";import{P as ve}from"./pen-line-BG9tBs_U-1770444204813.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=f("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=f("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=f("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),v=de.memo(({selectedPatient:d,userRole:o,detailTab:x,setDetailTab:y,isEditingDetail:b,editedPatient:r,setEditedPatient:p,goBack:D,savePatientEdit:E,toggleEditMode:P,setShowDeleteConfirm:w,toggleTreatmentItem:C,generateTodayLog:k,setShowQuickEntry:L,updatePatient:z})=>{var R,T,q,O,F,$,B,G,S,_,A;const a=d;if(!a)return null;const ee=u.useCallback(()=>{be(a)},[a]),se=u.useCallback(()=>{pe(a)},[a]),te=u.useCallback(()=>{w(!0)},[w]),ae=u.useCallback(()=>{L(!0)},[L]),re=u.useCallback(()=>{k(a)},[k,a]),le=u.useCallback(t=>{C(a.id,t)},[C,a.id]),ne=u.useCallback(()=>{var l;const t={date:"2026-01-11",items:a.treatmentPlan.items.filter(g=>g.completed).map(g=>g.name),highlight:((l=a.treatmentPlan.highlights)==null?void 0:l[0])||"å¸¸è§„è®­ç»ƒ",notes:"æ²»ç–—é¡ºåˆ©å®Œæˆ",therapist:"å´å¤§å‹‡"};z(a.id,{todayTreated:!0,treatmentLogs:[t,...a.treatmentLogs||[]]})},[a,z]);return e.jsx("div",{className:"min-h-screen flex justify-center pt-6 pb-6 px-4",children:e.jsxs("div",{className:"main-glass-container w-full max-w-md relative overflow-hidden flex flex-col p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("button",{onClick:D,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 transition-all",children:e.jsx(je,{size:24,className:"text-slate-600"})}),e.jsx("h1",{className:"text-lg font-extrabold text-slate-800 flex-1",children:"æ‚£å„¿è¯¦æƒ…"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:ee,className:"p-2 hover:bg-blue-100 rounded-xl transition-all",title:"ç”Ÿæˆæ²»ç–—å¡ç‰‡",children:e.jsx(we,{size:20,className:"text-blue-500"})}),e.jsx("button",{onClick:se,className:"p-2 hover:bg-slate-100 rounded-xl transition-all",title:"æ‰“å°æ‚£è€…æ¡£æ¡ˆ",children:e.jsx(fe,{size:20,className:"text-slate-500"})}),o==="therapist"&&e.jsxs(e.Fragment,{children:[b&&e.jsx("button",{onClick:E,className:"p-2 bg-emerald-100 text-emerald-600 rounded-xl transition-all hover:bg-emerald-200",title:"ä¿å­˜",children:e.jsx(Ne,{size:20})}),e.jsx("button",{onClick:P,className:`p-2 rounded-xl transition-all ${b?"bg-slate-100 text-slate-600 hover:bg-slate-200":"hover:bg-slate-100 text-slate-500"}`,title:b?"å–æ¶ˆç¼–è¾‘":"ç¼–è¾‘è¯¦æƒ…",children:b?e.jsx(he,{size:20}):e.jsx(ve,{size:20})})]}),o==="therapist"&&e.jsx("button",{onClick:te,className:"p-2 hover:bg-rose-100 rounded-xl transition-all",title:"åˆ é™¤æ‚£è€…",children:e.jsx(Z,{size:20,className:"text-rose-500"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto hide-scrollbar pb-20",children:[e.jsx("div",{className:"bg-white/60 backdrop-blur-xl rounded-2xl p-5 border border-white/50 shadow-sm mb-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center text-3xl border-2 border-white shadow-sm flex-shrink-0",children:a.avatar}),e.jsx("div",{className:"flex-1 min-w-0",children:b&&r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:r.name,onChange:t=>p(m(n({},r),{name:t.target.value})),className:"text-xl font-bold text-slate-800 border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent w-24",placeholder:"å§“å"}),e.jsx("input",{type:"text",value:r.age,onChange:t=>p(m(n({},r),{age:t.target.value})),className:"text-sm text-slate-600 border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent w-16",placeholder:"å¹´é¾„"}),e.jsxs("select",{value:r.gender,onChange:t=>p(m(n({},r),{gender:t.target.value})),className:"text-sm text-slate-600 border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent",children:[e.jsx("option",{value:"ç”·",children:"ç”·"}),e.jsx("option",{value:"å¥³",children:"å¥³"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"åºŠå·ï¼š"}),e.jsx("input",{type:"text",value:r.bedNo,onChange:t=>p(m(n({},r),{bedNo:t.target.value})),className:"text-sm text-slate-700 border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent w-16",placeholder:"åºŠå·"}),e.jsx("span",{className:"text-slate-300",children:"Â·"}),e.jsx("input",{type:"text",value:r.department,onChange:t=>p(m(n({},r),{department:t.target.value})),className:"text-sm text-slate-700 border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent w-24",placeholder:"ç§‘å®¤"})]}),e.jsx("input",{type:"text",value:r.diagnosis,onChange:t=>p(m(n({},r),{diagnosis:t.target.value})),className:"text-blue-600 font-medium border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent w-full",placeholder:"è¯Šæ–­"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:a.name}),e.jsxs("span",{className:"text-sm text-slate-400",children:[a.age," Â· ",a.gender]})]}),e.jsxs("p",{className:"text-sm text-slate-400 mb-1",children:["åºŠå·ï¼š",a.bedNo," Â· ",a.department]}),e.jsx("p",{className:"text-blue-600 font-semibold",children:a.diagnosis})]})})]})}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(N,{active:x==="today",onClick:()=>y("today"),children:"ðŸ“‹ ä»Šæ—¥æ²»ç–—"}),e.jsx(N,{active:x==="logs",onClick:()=>y("logs"),children:"ðŸ“… æ²»ç–—æ—¥å¿—"})]}),x==="today"&&e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-2xl p-4 border border-white/50 shadow-sm",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 mb-4",children:[e.jsxs("h5",{className:"text-sm font-bold text-slate-700 flex items-center gap-2 mb-2",children:[e.jsx(Ce,{size:16,className:"text-blue-500"}),"æ²»ç–—ç›®æ ‡"]}),b&&r?e.jsx("textarea",{value:((R=r.treatmentPlan)==null?void 0:R.focus)||"",onChange:t=>p(m(n({},r),{treatmentPlan:m(n({},r.treatmentPlan),{focus:t.target.value})})),className:"text-sm text-slate-700 leading-relaxed w-full bg-white border border-blue-200 rounded-lg p-2 focus:border-blue-400 outline-none resize-none",rows:2,placeholder:"æ²»ç–—ç›®æ ‡"}):e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:(T=a.treatmentPlan)==null?void 0:T.focus})]}),((O=(q=a.treatmentPlan)==null?void 0:q.highlights)==null?void 0:O.length)>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-4",children:[e.jsxs("h5",{className:"text-sm font-bold text-slate-700 flex items-center gap-2 mb-2",children:[e.jsx(W,{size:16,className:"text-amber-500"}),"ä»Šæ—¥ä¸ªæ€§åŒ–é‡ç‚¹"]}),e.jsx("ul",{className:"text-sm text-slate-600 space-y-1.5",children:a.treatmentPlan.highlights.map((t,l)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-500 mt-0.5",children:"â€¢"}),e.jsx("span",{className:"flex-1",children:t})]},l))})]}),(($=(F=a.treatmentPlan)==null?void 0:F.precautions)==null?void 0:$.length)>0&&e.jsxs("div",{className:"bg-rose-50 border border-rose-100 rounded-xl p-4 mb-4",children:[e.jsxs("h5",{className:"text-sm font-bold text-slate-700 flex items-center gap-2 mb-2",children:[e.jsx(ue,{size:16,className:"text-rose-500"}),"æ³¨æ„äº‹é¡¹"]}),e.jsx("ul",{className:"text-sm text-slate-600 space-y-1.5",children:a.treatmentPlan.precautions.map((t,l)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-rose-500 mt-0.5",children:"âš "}),e.jsx("span",{className:"flex-1",children:t})]},l))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"æ²»ç–—é¡¹ç›®"}),o==="therapist"&&e.jsxs("button",{onClick:re,className:"btn-particle py-1.5 px-3 rounded-xl text-xs",children:[e.jsxs("div",{className:"points_wrapper",children:[e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"})]}),e.jsxs("span",{className:"inner",children:[e.jsx(Y,{size:14}),"ç”Ÿæˆä»Šæ—¥æ—¥å¿—"]})]})]}),((G=(B=a.treatmentPlan)==null?void 0:B.items)==null?void 0:G.length)>0?e.jsx("div",{className:"space-y-2",children:a.treatmentPlan.items.map(t=>e.jsxs("div",{onClick:()=>le(t.id),className:`flex items-center gap-3 p-3 rounded-xl border transition cursor-pointer ${t.completed?"bg-emerald-50 border-emerald-200":"bg-white/50 border-slate-100 hover:border-blue-200"}`,children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-semibold ${t.completed?"text-emerald-600":"text-slate-700"}`,children:t.name}),e.jsx("span",{className:"text-xs text-slate-400",children:t.duration})]}),e.jsx("p",{className:"text-xs text-slate-400",children:t.note})]}),t.completed?e.jsx(j,{size:24,className:"text-emerald-500"}):e.jsx(ye,{size:24,className:"text-slate-300"})]},t.id))}):e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(ge,{size:40,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"æš‚æ— æ²»ç–—å®‰æŽ’"}),o==="therapist"&&e.jsxs("button",{onClick:ae,className:"mt-3 btn-particle btn-particle-cyan px-4 py-2 rounded-full text-sm",children:[e.jsxs("div",{className:"points_wrapper",children:[e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"})]}),e.jsx("span",{className:"inner",children:"å¿«é€Ÿå½•å…¥"})]})]}),o==="therapist"&&((_=(S=a.treatmentPlan)==null?void 0:S.items)==null?void 0:_.length)>0&&!a.todayTreated&&e.jsxs("button",{onClick:ne,className:"w-full mt-4 btn-particle btn-particle-emerald py-3 rounded-xl",children:[e.jsxs("div",{className:"points_wrapper",children:[e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"}),e.jsx("div",{className:"point"})]}),e.jsxs("span",{className:"inner",children:[e.jsx(j,{size:18}),"å®Œæˆä»Šæ—¥æ²»ç–—"]})]}),a.todayTreated&&e.jsxs("div",{className:"mt-4 text-center text-emerald-600 flex items-center justify-center gap-2 font-semibold",children:[e.jsx(j,{size:20,className:"text-emerald-500"}),"ä»Šæ—¥æ²»ç–—å·²å®Œæˆ"]})]}),x==="logs"&&e.jsx("div",{className:"bg-white/60 backdrop-blur-xl rounded-2xl p-4 border border-white/50 shadow-sm",children:((A=a.treatmentLogs)==null?void 0:A.length)>0?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-blue-200"}),e.jsx("div",{className:"space-y-6",children:a.treatmentLogs.map((t,l)=>{var g,H,I,M,Q,X,J,K;return e.jsxs("div",{className:"relative pl-10",children:[e.jsx("div",{className:"absolute left-2.5 top-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow-sm"}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-3 border border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b&&r?e.jsx("input",{type:"date",value:((H=(g=r.treatmentLogs)==null?void 0:g[l])==null?void 0:H.date)||t.date,onChange:i=>{const c=[...r.treatmentLogs||a.treatmentLogs.map(h=>n({},h))];c[l]||(c[l]=n({},t)),c[l].date=i.target.value,p(m(n({},r),{treatmentLogs:c}))},className:"text-sm font-bold text-slate-700 border-b-2 border-blue-400 focus:border-blue-500 outline-none bg-transparent"}):e.jsx("span",{className:"text-sm font-bold text-slate-700",children:t.date}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-400",children:t.therapist}),o==="therapist"&&b&&e.jsx("button",{onClick:()=>{if(window.confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æ²»ç–—è®°å½•å—ï¼Ÿ")){const i=[...(r==null?void 0:r.treatmentLogs)||a.treatmentLogs];i.splice(l,1),p(m(n({},r),{treatmentLogs:i}))}},className:"p-1 rounded-full bg-rose-100 text-rose-500 hover:bg-rose-200 transition-colors",children:e.jsx(Z,{size:14})})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-lg p-2 mb-2",children:b&&r?e.jsx("textarea",{value:((M=(I=r.treatmentLogs)==null?void 0:I[l])==null?void 0:M.highlight)||t.highlight,onChange:i=>{const c=[...r.treatmentLogs||a.treatmentLogs.map(h=>n({},h))];c[l]||(c[l]=n({},t)),c[l].highlight=i.target.value,p(m(n({},r),{treatmentLogs:c}))},className:"text-sm text-slate-700 w-full bg-transparent border-none outline-none resize-none",rows:2}):e.jsxs("p",{className:"text-sm text-slate-700 flex items-center gap-1",children:[e.jsx(W,{size:14,className:"text-amber-500"}),t.highlight]})}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:t.items.map((i,c)=>e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-lg font-medium",children:typeof i=="string"?i:i.name},c))}),(t.detailRecord||b)&&e.jsx("div",{className:"bg-slate-50 rounded-lg p-2 mb-2",children:b&&r?e.jsx("textarea",{value:((X=(Q=r.treatmentLogs)==null?void 0:Q[l])==null?void 0:X.detailRecord)||t.detailRecord||"",onChange:i=>{const c=[...r.treatmentLogs||a.treatmentLogs.map(h=>n({},h))];c[l]||(c[l]=n({},t)),c[l].detailRecord=i.target.value,p(m(n({},r),{treatmentLogs:c}))},className:"text-xs text-slate-600 leading-relaxed w-full bg-transparent border-none outline-none resize-none",rows:3,placeholder:"è¯¦ç»†è®°å½•"}):e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed whitespace-pre-wrap",children:t.detailRecord})}),b&&r?e.jsx("textarea",{value:((K=(J=r.treatmentLogs)==null?void 0:J[l])==null?void 0:K.notes)||t.notes||"",onChange:i=>{const c=[...r.treatmentLogs||a.treatmentLogs.map(h=>n({},h))];c[l]||(c[l]=n({},t)),c[l].notes=i.target.value,p(m(n({},r),{treatmentLogs:c}))},className:"text-xs text-slate-600 w-full bg-slate-50 border border-slate-200 rounded-lg p-2 outline-none resize-none",rows:2,placeholder:"å¤‡æ³¨"}):e.jsx("p",{className:"text-xs text-slate-400",children:t.notes})]})]},l)})})]}):e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(Y,{size:40,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"æš‚æ— æ²»ç–—è®°å½•"})]})})]})]})})}),N=({children:d,active:o,onClick:x})=>e.jsx("button",{onClick:x,className:`flex-1 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 ${o?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md":"bg-white/50 text-slate-500 border border-slate-200 hover:border-blue-300"}`,children:d});v.displayName="PatientDetailPage";N.displayName="TabButton";v.propTypes={selectedPatient:s.shape({id:s.oneOfType([s.string,s.number]),name:s.string,avatar:s.string,bedNo:s.string,diagnosis:s.string,status:s.string,admissionDate:s.string,department:s.string,age:s.string,gender:s.string,guardian:s.string,contact:s.string,address:s.string,medicalHistory:s.string,allergies:s.string,safetyAlerts:s.arrayOf(s.string),gasGoals:s.arrayOf(s.shape({id:s.oneOfType([s.string,s.number]),goal:s.string,baseline:s.string,target:s.string,current:s.string,progress:s.number})),treatmentPlan:s.arrayOf(s.shape({id:s.oneOfType([s.string,s.number]),name:s.string,frequency:s.string,duration:s.string,therapist:s.string,notes:s.string,completed:s.bool})),executionLog:s.arrayOf(s.shape({date:s.string,items:s.arrayOf(s.string),notes:s.string}))}),userRole:s.oneOf(["therapist","doctor"]).isRequired,detailTab:s.string.isRequired,setDetailTab:s.func.isRequired,isEditingDetail:s.bool.isRequired,editedPatient:s.object,setEditedPatient:s.func.isRequired,goBack:s.func.isRequired,savePatientEdit:s.func.isRequired,toggleEditMode:s.func.isRequired,setShowDeleteConfirm:s.func.isRequired,toggleTreatmentItem:s.func.isRequired,generateTodayLog:s.func.isRequired,setShowQuickEntry:s.func.isRequired,updatePatient:s.func.isRequired};v.defaultProps={selectedPatient:null,editedPatient:null};export{v as default};
