import{c as p,R as f,r,j as e}from"./index-Cs5sQcoR-1772246974185.js";import{T as j,C as b,e as g,P as a}from"./RehabCareLink-CvJsYKDp-1772246974185.js";import{C as N}from"./chevron-left-BEA3EQDe-1772246974185.js";import{T as v}from"./TruckLoader-CphEooHa-1772246974185.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=p("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),h=f.memo(({selectedDepartment:s,getDepartmentPatients:i,isLoadingPatients:d,goBack:c,navigateTo:n})=>{if(!s)return null;const t=r.useMemo(()=>i(s.id),[i,s.id]),m=r.useMemo(()=>t.filter(l=>l.status==="active"),[t]),x=r.useMemo(()=>t.filter(l=>l.status==="completed"),[t]),u=r.useCallback(l=>{n("patientDetail",l)},[n]);return e.jsx("div",{className:"min-h-screen flex justify-center pt-6 pb-6 px-4",children:e.jsxs("div",{className:"main-glass-container w-full max-w-md relative overflow-hidden flex flex-col p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("button",{onClick:c,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 transition-all",children:e.jsx(N,{size:24,className:"text-slate-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-extrabold text-slate-800",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[m.length," 位患儿在治"]})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center shadow-sm border border-slate-100 overflow-hidden",children:s.icon.startsWith("/images/")?e.jsx("img",{src:s.icon,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xl",children:s.icon})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto hide-scrollbar",children:d?e.jsx(v,{message:"加载患者数据中..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-600 mb-3 flex items-center gap-2 pl-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"进行中 (",m.length,")"]}),e.jsx("div",{className:"space-y-3",children:m.map(l=>e.jsx(o,{patient:l,onClick:u},l.id))})]}),x.length>0&&e.jsxs("div",{className:"mb-20",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 mb-3 flex items-center gap-2 pl-1",children:[e.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full"}),"已完成/出院 (",x.length,")"]}),e.jsx("div",{className:"space-y-3 opacity-70",children:x.map(l=>e.jsx(o,{patient:l,onClick:u},l.id))})]})]})})]})})}),o=f.memo(({patient:s,onClick:i})=>{var c;const d=r.useCallback(()=>{i(s)},[i,s]);return e.jsx("button",{onClick:d,className:"w-full bg-white/60 backdrop-blur-xl rounded-2xl p-4 text-left border border-white/50 shadow-sm hover:bg-white/80 transition-all active:scale-[0.98]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center text-2xl border-2 border-white shadow-sm flex-shrink-0",children:s.avatar}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold text-slate-800",children:s.name}),e.jsxs("span",{className:"text-xs text-slate-400",children:[s.age," · ",s.gender]}),e.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-medium",children:s.bedNo})]}),e.jsx("p",{className:"text-sm text-blue-600 font-medium mb-2 truncate",children:s.diagnosis}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(c=s.safetyAlerts)==null?void 0:c.map((n,t)=>e.jsxs("span",{className:"bg-rose-100 text-rose-600 text-[10px] px-2 py-0.5 rounded-full flex items-center font-medium",children:[e.jsx(j,{size:10,className:"mr-0.5"}),n]},t)),s.todayTreated?e.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-[10px] px-2 py-0.5 rounded-full flex items-center font-medium",children:[e.jsx(b,{size:10,className:"mr-0.5"}),"今日已治疗"]}):s.status==="active"&&e.jsxs("span",{className:"bg-amber-100 text-amber-600 text-[10px] px-2 py-0.5 rounded-full flex items-center font-medium",children:[e.jsx(y,{size:10,className:"mr-0.5"}),"待治疗"]})]})]}),e.jsx(g,{size:18,className:"text-slate-300 mt-2 flex-shrink-0"})]})})});h.displayName="PatientsPage";o.displayName="PatientCard";h.propTypes={selectedDepartment:a.shape({id:a.oneOfType([a.string,a.number]).isRequired,name:a.string.isRequired,icon:a.string.isRequired}).isRequired,getDepartmentPatients:a.func.isRequired,isLoadingPatients:a.bool,goBack:a.func.isRequired,navigateTo:a.func.isRequired};h.defaultProps={selectedDepartment:null};export{h as default};
